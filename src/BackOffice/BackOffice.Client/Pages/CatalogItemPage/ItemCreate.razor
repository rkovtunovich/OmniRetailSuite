@inject ILogger<ItemCreate> Logger
@inject ICatalogService CatalogItemService

@inherits BlazorComponent

@namespace BackOffice.Client.Pages.CatalogItemPage

@using BackOffice.Core.Models.Catalog;
@using BackOffice.Core.Services.Abstraction;
@using BackOffice.Client.Helpers;

<MudContainer Class="m-0 p-0 form-content-panel">
    <MudToolBar Dense Class="form-command-panel">

         <MudTooltip Text="Save">
             <MudIconButton Icon="@Icons.Material.Outlined.Save" Color="Color.Inherit" Class="mr-5" OnClick="@CreateClick" />
         </MudTooltip>

         <MudSpacer></MudSpacer>

         <MudTooltip Text="Close">
             <MudIconButton Icon="@Icons.Material.Outlined.Close" Color="Color.Inherit" Class="mr-5" OnClick="@Close" />
         </MudTooltip>

     </MudToolBar>

     <EditForm EditContext="@_editContext" OnValidSubmit="@CreateClick">
         <DataAnnotationsValidator />
         <MudGrid>
             <MudItem Style="min-width:50%">
                 <MudCard>
                     <MudCardContent>
                         <MudTextField Label="Name" Class="mt-3" @bind-Value="_item.Name" For="@(() => _item.Name)" Variant="@MudBlazor.Variant.Filled" />
                         <MudTextField Label="Description" Class="mt-3" @bind-Value="_item.Description" For="@(() => _item.Description)" Variant="@MudBlazor.Variant.Filled" />

                         <MudSelect T="CatalogType" @bind-Value=_item.CatalogType ToStringFunc="@_converterItemType" Label="Select item type" Clearable Variant="@MudBlazor.Variant.Filled">
                             @foreach (var item in _itemTypes)
                            {
                                <MudSelectItem Value="@item"></MudSelectItem>
                            }
                        </MudSelect>

                        <MudSelect T="CatalogBrand" @bind-Value=_item.CatalogBrand ToStringFunc="@_converterItemBrand" Label="Select item brand" Clearable Variant="@MudBlazor.Variant.Filled">
                             @foreach (var item in _itemBrands)
                            {
                                <MudSelectItem Value="@item"></MudSelectItem>
                            }
                        </MudSelect>

                        <MudTextField Label="Barcode" Class="mt-3" @bind-Value="_item.Barcode" For="@(() => _item.Barcode)" Variant="@MudBlazor.Variant.Filled" />
                        <MudNumericField Label="Price" Class="mt-3" @bind-Value="_item.Price" For="@(() => _item.Price)" Variant="@MudBlazor.Variant.Filled" />
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </EditForm>
</MudContainer>
