@inherits BlazorComponent

@namespace BackOffice.Client.Pages.ProductCatalog.Item
@using BackOffice.Client.Model

<MudContainer Class="m-0 p-0 form-content-panel">

    <MudToolBar Dense Class="form-command-panel">

        <MudTooltip Text="Save">
            <MudIconButton Icon="@Icons.Material.Outlined.Save" Color="Color.Inherit" Class="mr-5" OnClick="@SaveClick" />
        </MudTooltip>

         <MudTooltip Text="Mark as deleted">
             <MudIconButton Icon="@Icons.Material.Outlined.Delete" Color="Color.Inherit" Class="mr-5" OnClick="@DeleteClick" />
         </MudTooltip>

        <MudSpacer></MudSpacer>

        <MudTooltip Text="Close">
            <MudIconButton Icon="@Icons.Material.Outlined.Close" Color="Color.Inherit" Class="mr-5" OnClick="@CloseClick" />
        </MudTooltip>

    </MudToolBar>

    <EditForm EditContext="@_editContext" OnValidSubmit="@SaveClick">
        <DataAnnotationsValidator />
        <MudGrid>
            <MudItem Style="min-width:50%">
                <MudCard>
                    <MudCardContent>
                        <MudTextField Label="Id" Class="mt-3" @bind-Value="ProductItem.Id" For="@(() => ProductItem.Id)" Variant="@MudBlazor.Variant.Filled" Disabled />
                        <MudTextField Label="Name" Class="mt-3" @bind-Value="ProductItem.Name" For="@(() => ProductItem.Name)" Variant="@MudBlazor.Variant.Filled" />
                        <MudTextField Label="Description" Class="mt-3" @bind-Value="ProductItem.Description" For="@(() => ProductItem.Description)" Variant="@MudBlazor.Variant.Filled" />

                         <MudSelect T="ProductParentSelectModel" Label="Select Parent" @bind-Value="_selectedParent" ToStringFunc="@_converterItemParent" Clearable Variant="@MudBlazor.Variant.Filled">
                             @foreach (var parent in _flattenedParents)
                            {
                                 <MudSelectItem Value="@parent"></MudSelectItem> 
                            }
                        </MudSelect>

                        <MudSelect T="ProductType" @bind-Value=ProductItem.ItemType ToStringFunc="@_converterItemType" Label="Select item type" Clearable Variant="@MudBlazor.Variant.Filled">
                             @foreach (var item in _itemTypes)
                            {
                                <MudSelectItem Value="@item"></MudSelectItem>
                            }
                        </MudSelect>

                        <MudSelect T="ProductBrand" @bind-Value=ProductItem.Brand ToStringFunc="@_converterItemBrand" Label="Select item brand" Clearable Variant="@MudBlazor.Variant.Filled">
                             @foreach (var item in _itemBrands)
                            {
                                <MudSelectItem Value="@item"></MudSelectItem>
                            }
                        </MudSelect>

                        <MudTextField Label="Barcode" Class="mt-3" @bind-Value="ProductItem.Barcode" For="@(() => ProductItem.Barcode)" Variant="@MudBlazor.Variant.Filled" />
                        <MudNumericField Label="Price" Class="mt-3" @bind-Value="ProductItem.Price" For="@(() => ProductItem.Price)" T="decimal" Format="N2" Variant="@MudBlazor.Variant.Filled" />
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </EditForm>
</MudContainer>



