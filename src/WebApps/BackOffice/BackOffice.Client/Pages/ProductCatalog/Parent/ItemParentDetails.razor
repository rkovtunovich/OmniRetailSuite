@inherits DetailsFormBase<ProductParent>

@namespace BackOffice.Client.Pages.ProductCatalog.Parent

<Form Commands="@ToolbarCommands">
    <FormContent>

        <EditForm EditContext="@EditContext" OnValidSubmit="@SaveClick">

            <DataAnnotationsValidator />

            <MudGrid>
                <MudItem Style="min-width:50%">
                    <MudCard>

                        <MudCardContent>

                            <MudTextField Label="Id" Class="mt-3" @bind-Value="Model.Id" For="@(() => Model.Id)" Variant="@MudBlazor.Variant.Filled" Disabled />
                            <MudTextField Label="Name" Class="mt-3" @bind-Value="Model.Name" For="@(() => Model.Name)" Variant="@MudBlazor.Variant.Filled" />
                            <MudSelect T="ProductParentSelectModel" Label="Select Parent" @bind-Value="_selectedParent" ToStringFunc="@_converterProductParent" Clearable Variant="@MudBlazor.Variant.Filled">
                                @foreach (var parent in _flattenedParents)
                                {
                                    // If the parent is the current item, don't show it in the dropdown
                                    if (parent.Id != Model.Id)
                                    {
                                        <MudSelectItem Value="@parent"></MudSelectItem>
                                    }
                                }
                            </MudSelect>

                        </MudCardContent>

                    </MudCard>
                </MudItem>
            </MudGrid>

        </EditForm>


    </FormContent>
</Form>



