@inject ILogger<ItemCreate> Logger
@inherits CreationFormBase<ProductItem>

@namespace BackOffice.Client.Components.Pages.ProductCatalog.Item

<Form Commands="@ToolbarCommands">
    <FormContent>

        <EditForm EditContext="@EditContext" OnValidSubmit="@CreateClick">
            <DataAnnotationsValidator />
            <MudGrid>
                <MudItem Style="min-width:50%">
                    <MudCard>
                        <MudCardContent>
                            <MudTextField Label="Name" Class="mt-3" @bind-Value="Model.Name" For="@(() => Model.Name)" Variant="@MudBlazor.Variant.Filled" />
                            <MudTextField Label="Description" Class="mt-3" @bind-Value="Model.Description" For="@(() => Model.Description)" Variant="@MudBlazor.Variant.Filled" />

                            <HierarchySelect OwnerId="@Model.Id"
                                             SelectedId="@Model.ParentId"
                                             Label="Parent"
                                             OnChanged="@OnParentChanged"
                                             Items="@(Mapper.Map<List<HierarchySelectModel>>(_allProductParents))" />

                            <MudSelect T="ProductType" @bind-Value=Model.ProductType ToStringFunc="@_converterItemType" Label="Select item type" Clearable Variant="@MudBlazor.Variant.Filled">
                                 @foreach (var item in _itemTypes)
                                {
                                    <MudSelectItem Value="@item"></MudSelectItem>
                                }
                            </MudSelect>

                            <MudSelect T="ProductBrand" @bind-Value=Model.ProductBrand ToStringFunc="@_converterItemBrand" Label="Select item brand" Clearable Variant="@MudBlazor.Variant.Filled">
                                 @foreach (var item in _itemBrands)
                                {
                                    <MudSelectItem Value="@item"></MudSelectItem>
                                }
                            </MudSelect>

                            <MudTextField Label="Barcode" Class="mt-3" @bind-Value="Model.Barcode" For="@(() => Model.Barcode)" Variant="@MudBlazor.Variant.Filled" />
                            <MudNumericField Label="Price" Class="mt-3" @bind-Value="Model.Price" For="@(() => Model.Price)" Variant="@MudBlazor.Variant.Filled" />
                        </MudCardContent>
                    </MudCard>
                </MudItem>
            </MudGrid>
        </EditForm>

    </FormContent>
</Form>

