@page "/cashiers-workplace"
@using RetailAssistant.Core.Models.ProductCatalog
@inherits OrsComponentBase

<MudPaper Height="100%" Class="d-flex">


    <MudSplitter Style=" min-width:100%; height:100%;" @bind-Dimension="@_splitterPercentage">

        <StartContent>

            <MudContainer>
                <MudTable Items="_receipt.ReceiptItems" Hover="true" Breakpoint="Breakpoint.Sm" LoadingProgressColor="Color.Info">
                    <HeaderContent>
                        <MudTh>Nr</MudTh>
                        <MudTh>Item</MudTh>
                        <MudTh>Quantity</MudTh>
                        <MudTh>Price</MudTh>
                        <MudTh>Totals</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Nr">@context.LineNumber</MudTd>
                        <MudTd DataLabel="Item">@context.ProductItem.Name</MudTd>
                        <MudTd DataLabel="Quantity">@context.Quantity</MudTd>
                        <MudTd DataLabel="Price">@context.UnitPrice</MudTd>
                        <MudTd DataLabel="Total">@context.TotalPrice</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudContainer>

        </StartContent>

        <EndContent>

            <MudContainer Class="cashiers-keyboard-container" Style="width:100%">

                <MudTreeView T="ProductParent" Items="@_itemParents" Hover="true" Dense>
                    <ItemTemplate Context="item">

                        <MudTreeViewItem Items="@item.Children"
                                         Icon="@Icons.Material.Outlined.Folder"
                                         Value="item"
                                         OnDoubleClick="@(e => OnParentItemDoubleClick(item, e))"
                                         Class="@($"{GetItemClass(item)} ors-no-select")">

                            <BodyContent>
                                <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
                                    <MudText Class="ors-tree-item-parent-code" Style="flex-basis: 20%; margin-right: 16px;">@item.GetCode()</MudText>
                                    <MudText Class="ors-tree-item-parent-name" Style="flex-grow: 1;">@item.Name</MudText>
                                </div>
                            </BodyContent>

                        </MudTreeViewItem>

                    </ItemTemplate>
                </MudTreeView>
                        
            </MudContainer>

        </EndContent>

    </MudSplitter>


</MudPaper>


